<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recherche Films et S√©ries</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .subtitle {
            font-size: 1.2em;
            margin-bottom: 40px;
            color: rgba(255,255,255,0.8);
        }

        .search-box {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #333;
            font-weight: bold;
        }

        input[type="text"] {
            width: 100%;
            padding: 20px;
            font-size: 1.2em;
            border: 3px solid #667eea;
            border-radius: 10px;
            outline: none;
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            border-color: #764ba2;
            box-shadow: 0 0 20px rgba(118, 75, 162, 0.3);
        }

        button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.3em;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            margin: 30px 0;
            font-size: 1.2em;
            color: #ffd700;
        }

        .spinner {
            border: 4px solid rgba(255,255,255,0.3);
            border-left: 4px solid #ffd700;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            display: none;
            margin-top: 30px;
        }

        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .movie-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .movie-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .movie-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .movie-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffd700;
        }

        .movie-year {
            font-size: 1em;
            color: rgba(255,255,255,0.8);
            margin-bottom: 10px;
        }

        .movie-rating {
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .error {
            background: rgba(255, 0, 0, 0.2);
            border: 2px solid rgba(255, 0, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: #ffcccc;
            font-size: 1.1em;
        }

        .no-results {
            background: rgba(255, 165, 0, 0.2);
            border: 2px solid rgba(255, 165, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: #ffe4b5;
            font-size: 1.1em;
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            font-size: 1.1em;
            line-height: 1.5;
        }

        .example {
            font-style: italic;
            color: #ffd700;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé¨ Recherche Films & S√©ries üì∫</h1>
        <p class="subtitle">Tapez le nom d'un film ou d'une s√©rie et d√©couvrez son affiche !</p>
        
        <div class="instructions">
            <strong>Comment √ßa marche :</strong><br>
            1. Tapez le nom du film ou de la s√©rie dans la case ci-dessous<br>
            2. Cliquez sur "Rechercher"<br>
            3. Regardez les r√©sultats avec les affiches !
            <div class="example">
                Exemples : "Avengers", "Stranger Things", "Titanic", "Game of Thrones"
            </div>
        </div>

        <div class="search-box">
            <div class="input-group">
                <label for="searchInput">Nom du film ou de la s√©rie :</label>
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Exemple : Avengers, Stranger Things, Titanic..."
                    onkeypress="handleEnter(event)"
                />
            </div>
            <button onclick="searchMovies()" id="searchBtn">
                üîç Rechercher
            </button>
        </div>

        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>Recherche en cours...</p>
        </div>

        <div id="error" class="error" style="display: none;"></div>
        <div id="noResults" class="no-results" style="display: none;"></div>

        <div id="results" class="results">
            <h2>R√©sultats trouv√©s :</h2>
            <div id="movieGrid" class="movie-grid"></div>
        </div>
    </div>

    <script>
        // Fonction pour chercher quand on appuie sur Entr√©e
        function handleEnter(event) {
            if (event.key === 'Enter') {
                searchMovies();
            }
        }

        // Fonction principale de recherche
        async function searchMovies() {
            const searchInput = document.getElementById('searchInput');
            const searchBtn = document.getElementById('searchBtn');
            const loading = document.getElementById('loading');
            const error = document.getElementById('error');
            const noResults = document.getElementById('noResults');
            const results = document.getElementById('results');
            const movieGrid = document.getElementById('movieGrid');

            // V√©rifier si on a tap√© quelque chose
            const searchTerm = searchInput.value.trim();
            if (searchTerm === '') {
                showError('Veuillez taper le nom d\'un film ou d\'une s√©rie !');
                return;
            }

            // Pr√©parer l'interface
            searchBtn.disabled = true;
            loading.style.display = 'block';
            error.style.display = 'none';
            noResults.style.display = 'none';
            results.style.display = 'none';
            movieGrid.innerHTML = '';

            try {
                // Appeler l'API pour chercher des films et s√©ries
                const movies = await fetchMoviesAndShows(searchTerm);
                
                if (movies.length > 0) {
                    // Afficher les r√©sultats
                    displayResults(movies);
                    results.style.display = 'block';
                } else {
                    // Aucun r√©sultat trouv√©
                    noResults.innerHTML = `Aucun film ou s√©rie trouv√© pour "<strong>${searchTerm}</strong>".<br>Essayez avec un autre nom !`;
                    noResults.style.display = 'block';
                }

            } catch (err) {
                console.error('Erreur:', err);
                showError('Oops ! Il y a eu un probl√®me. Essayez encore dans quelques secondes.');
            } finally {
                // Remettre l'interface normale
                loading.style.display = 'none';
                searchBtn.disabled = false;
            }
        }

        // Fonction pour appeler l'API de films
        async function fetchMoviesAndShows(searchTerm) {
            const API_KEY = 'a07e22bc18f5cb106bfe4cc1f83ad8ed';
            const BASE_URL = 'https://api.themoviedb.org/3';
            
            let allResults = [];

            try {
                // Chercher des films
                const movieUrl = `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${encodeURIComponent(searchTerm)}&language=fr-FR`;
                const movieResponse = await fetch(movieUrl);
                const movieData = await movieResponse.json();
                
                if (movieData.results) {
                    // Marquer comme films
                    const movies = movieData.results.map(item => ({...item, type: 'Film'}));
                    allResults.push(...movies);
                }

                // Chercher des s√©ries TV
                const tvUrl = `${BASE_URL}/search/tv?api_key=${API_KEY}&query=${encodeURIComponent(searchTerm)}&language=fr-FR`;
                const tvResponse = await fetch(tvUrl);
                const tvData = await tvResponse.json();
                
                if (tvData.results) {
                    // Marquer comme s√©ries et adapter les noms de propri√©t√©s
                    const shows = tvData.results.map(item => ({
                        ...item,
                        type: 'S√©rie',
                        title: item.name, // Les s√©ries utilisent 'name' au lieu de 'title'
                        release_date: item.first_air_date
                    }));
                    allResults.push(...shows);
                }

            } catch (error) {
                console.error('Erreur API:', error);
                throw error;
            }

            // Trier par popularit√© et garder les 12 premiers
            return allResults
                .sort((a, b) => (b.popularity || 0) - (a.popularity || 0))
                .slice(0, 12);
        }

        // Fonction pour afficher les r√©sultats
        function displayResults(movies) {
            const movieGrid = document.getElementById('movieGrid');
            
            movies.forEach(movie => {
                // Cr√©er l'√©l√©ment pour chaque film/s√©rie
                const movieElement = document.createElement('div');
                movieElement.className = 'movie-item';
                
                // URL de l'affiche (image)
                const posterUrl = movie.poster_path 
                    ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`
                    : 'https://via.placeholder.com/500x750/667eea/white?text=Pas+d\'affiche';

                // Ann√©e de sortie
                const year = movie.release_date 
                    ? new Date(movie.release_date).getFullYear() 
                    : 'Ann√©e inconnue';

                // Note (sur 10)
                const rating = movie.vote_average 
                    ? movie.vote_average.toFixed(1) + '/10'
                    : 'Pas de note';

                // Cr√©er le HTML
                movieElement.innerHTML = `
                    <img src="${posterUrl}" alt="${movie.title}" class="movie-poster" />
                    <div class="movie-title">${movie.title}</div>
                    <div class="movie-year">${movie.type} ‚Ä¢ ${year}</div>
                    <div class="movie-rating">‚≠ê ${rating}</div>
                `;
                
                movieGrid.appendChild(movieElement);
            });
        }

        // Fonction pour afficher les erreurs
        function showError(message) {
            const error = document.getElementById('error');
            error.textContent = message;
            error.style.display = 'block';
        }

        // Focus automatique sur la zone de texte quand la page se charge
        window.onload = function() {
            document.getElementById('searchInput').focus();
        };
    </script>
</body>
</html>